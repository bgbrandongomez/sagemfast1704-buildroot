<html>
   <head>
      <meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <link rel="stylesheet" href='stylemain.css' type='text/css'>
         <link rel="stylesheet" href='colors.css' type='text/css'>
            <script language="javascript" src="util.js"></script>

<script language="javascript">
<!-- hide
function applyClick(intfEnable) {
    // lst format: monitor_interface|direction(1[out],0[in])|
    // mirror_interface|status(1[enabled],0[disabled]),
    with ( document.forms[0] ) {
    var lst = '';
    var loc = 'engdebug.cmd?action=apply';
    if (intfEnable.length > 0) {
        for (i = 0; i < intfEnable.length; i++) {
            lst = lst + intfEnable[i].value + '|' + mirrorIntf[i].value + '|';
            if ( intfEnable[i].checked == true )
                lst = lst + '1,';
            else
                lst = lst + '0,';
        }
    }

    loc += '&mirrorLst=' + lst;
    var code = 'location="' + loc + '"';
    eval(code);
    }
}

// done hiding -->

</script>
</head>
<body>
    <blockquote>
        <form>
        <b>Engineering Debugging Features:</b><br><br>
        <table border='1' cellpadding='6' cellspacing='0'>
        <tr align='center'>
            <td class='hd'>Monitor Interface</td>
            <td class='hd'>Direction</td>
            <td class='hd'>MirrorFlowType</td>
            <td class='hd'>Mirror Interface</td>
            <td class='hd'>Enable</td>
        </tr>
<script language="javascript">
<!-- hide
{
   var i = 0;
   var j = 0;
   var monIntfInfo = '<%ejGetOther(wanInterfaceInfo, portMirror)%>';
   var monIntfs = monIntfInfo.split('|');
   var brIntfInfo = '<%ejGetOther(bridgeInterfaceInfo, all)%>';
   var brIntfs = brIntfInfo.split('|');
   var pmIntfInfo_build_timestamp = '<%ejGetOther(getportmirrorviewinfo,build_timestamp)%>';
   var pmIntfInfo_boardID = '<%ejGetOther(getportmirrorviewinfo,boardID)%>';
   var pmIntfInfo_nvram_data = '<%ejGetOther(getportmirrorviewinfo,nvram_data)%>';
   var pmIntfInfo_swVers = '<%ejGetOther(getportmirrorviewinfo,swVers)%>';
   var pmIntfInfo_PhyVersion = '<%ejGetOther(getportmirrorviewinfo,PhyVersion)%>';
   var pmIntfInfo_cfeVers = '<%ejGetOther(getportmirrorviewinfo,cfeVers)%>';
   var pmIntfInfo_kernelrelease = '<%ejGetOther(getportmirrorviewinfo,kernelrelease)%>';
   var pmIntfInfo_wlVersion = '<%ejGetOther(getportmirrorviewinfo,wlVersion)%>';

   //Build Image Time
   document.write("<b><font color='blue'>Build Image Time:" + pmIntfInfo_build_timestamp +" </font></b><br><br>\n");

   //Board ID
   document.write("<b><font color='blue'>Board ID: " + pmIntfInfo_boardID +"</font></b><br><br>\n");

   //Customer ID and Customer Name
   document.write("<b><font color='blue'>Customer Name: " + pmIntfInfo_nvram_data +"</font></b><br><br>\n");

   //Software Version
   document.write("<b><font color='blue'>Software Version: " + pmIntfInfo_swVers + "</font></b><br><br>\n") ;

   //ADSL physical Version
   document.write("<b><font color='blue'>ADSL physical Version: " + pmIntfInfo_PhyVersion + "</font></b><br><br>\n");

   //CFE Version
   document.write("<b><font color='blue'>CFE Version: " + pmIntfInfo_cfeVers + "</font></b><br><br>\n");
   document.write("<b><font color='blue'>Kernel Version: " + pmIntfInfo_kernelrelease + "</font></b><br><br>\n");

   //Wireless Version
   document.write( "<b><font color='blue'>Wireless Version: " + pmIntfInfo_wlVersion +  "</font></b><br><br>\n");

   // Entry format: monitor_interface|direction(1[out],0[in])|
   // mirror_interface|status(1[enabled],0[disabled])
   for ( i = 0; i < monIntfs.length; i++ ) {
      var monEntry = monIntfs[i].split('/');
      document.write("<tr align='center'> ");
      document.write("<td> " + monEntry[0] + "</td> ");
      document.write("<td> " + monEntry[1] + "</td> ");

      document.write("<td> <select name='mirrorType'> ");
      document.write("<option value='802.3' selected>802.3</option>");
      document.write("</select></td> ");
      document.write("<td> <select name='mirrorIntf'> ");
      for ( j = 0; j < brIntfs.length; j++ ) {
        if ( monEntry[2] == brIntfs[j] )
          document.write("<option value='" + brIntfs[j] + "' selected> " + brIntfs[j] + "</option>");
        else
          document.write("<option value='" + brIntfs[j] + "'> " + brIntfs[j] + "</option>");
      }
      document.write("</select></td> ");
      if ( monEntry[3] == 1 )
        document.write("<td align='center'><input type='checkbox' name='intfEnable' value='" + monEntry[0] + "|" + monEntry[1] + "' checked> </td> ");
      else
        document.write("<td align='center'><input type='checkbox' name='intfEnable' value='" + monEntry[0] + "|" + monEntry[1] + "'> </td> ");
      document.write("</tr> ");
   }
}
// done hiding -->
</script>
        </table>
   <b><font color='violet'>1. Port Mirroring Setup</font></b><br><br>
   <b>A feature to <b><font color='green'>MONITOR</font></b> ANY interface (Current Support is WAN I/F) side port traffic per direction (IN/OUT)
   <b>&<b><font color='red'>MIRROR</font></b> the Monitored traffic onto the selected ports <br><br>
   <b>Current configuration is displayed. Choose the configuration...          </b><br>
   <b>Choose Apply the changes, to save/apply the configuration dynamically.</b><br><br>
   <tr>
   <tr>
        <br>
        <center>
        <input type='button' onClick='applyClick(this.form.intfEnable)' value='Apply/Save'>
        </center>
        </form>
    </blockquote>
</body>
</html>

