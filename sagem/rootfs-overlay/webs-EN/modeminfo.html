<html>
   <head>
      <meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <link rel="stylesheet" href='stylemain.css' type='text/css'>
         <link rel="stylesheet" href='colors.css' type='text/css'>
            <script language="javascript" src="util.js"></script>
            <script language="javascript">
<!-- hide


var ejpin = '<%ejGet(Pin)%>';
var ejapn = '<%ejGet(Apn)%>';
var ejuser = '<%ejGet(UsbPppUser)%>';
var ejpasswrd = '<%ejGet(UsbPppPasswrd)%>';
var ejauthprotocol = '<%ejGet(UsbPppAuthProtocol)%>';
var ejdialno = '<%ejGet(DialNo)%>';
var Baud='<%ejGet(Baud)%>';
var ipaddr='<%ejGet(StaticIp)%>';
var autowan = '<%ejGet(enableBackup)%>';
var index;
function frmLoad() {

	
	
with ( document.forms[0] ) {
	Pin.value = ejpin;
	Apn.value = ejapn;
	User.value = ejuser;
	Passwrd.value = ejpasswrd;
	//AuthProtocol.value = ejauthprotocol;
	DialNo.value = ejdialno;


    AuthPrtl.selectedIndex = parseInt(ejauthprotocol);

	if(autowan == '1')
		Auto.checked = true;
	else
		Auto.checked = false;
	/*
	switch(Baud)
	{
	  case '1200':
		Brand.selectedIndex=0;
		break;
	  case '2400':
	  	Brand.selectedIndex=1;
		break;
	 case '4800':
	 	Brand.selectedIndex=2;
		break;
	 case '9600':
	 	Brand.selectedIndex=3;
		break;
	case '19200':
		Brand.selectedIndex=4;
		break;
	case '38400':
		Brand.selectedIndex=5; 
		break;
	case '57600':
		Brand.selectedIndex=6;
		break;
	case '115200':
		Brand.selectedIndex=7;
		break;
	case '230400':
		Brand.selectedIndex=8;
		break;
	case '460800':
		Brand.selectedIndex=9;
		break;
	case '921600':
		Brand.selectedIndex=10;
		break;
									
	}
	if(ipaddr=='0.0.0.0')
	{
		IpEnable.checked=false;
		onChange(IpEnable);
	}
	else
	{
		IpEnable.checked=true;
		ipaddress.value=ipaddr;
		onChange(IpEnable);
	}
	*/
	
}
}
function onChange()
{
 with(document.forms[0])
 {
 if(IpEnable.checked == true)
 	staticipaddress.style.display="block";
 else
 	staticipaddress.style.display="none";
 }
}
function btnDisconnect() {
	var code = 'location.href="modeminfo.cgi?action=modemconn&modemcmd=Disconnect"';
  eval(code);
}
function btnConnect() {
	var code = 'location.href="modeminfo.cgi?action=modemconn&modemcmd=Connect"';
  eval(code);
}

function btnSave() {
   var loc = 'modeminfo.cgi?';

   with ( document.forms[0] ) {

	   if(Auto.checked)
	  	{
	  	loc += 'enableBackup=1';
		}
		else
		{
		loc += 'enableBackup=0';
		} 
	  index = AuthPrtl.selectedIndex;
	  loc += '&UsbPppAuthProtocol=' + AuthPrtl.options[index].value;	
      loc += '&Pin=' + Pin.value;
	  loc += '&Apn=' + encodeUrl(Apn.value);
	  loc += '&UsbPppUser=' + encodeUrl(User.value);
	  loc += '&UsbPppPasswrd=' + encodeUrl(Passwrd.value);
	  loc += '&DialNo=' + encodeUrl(DialNo.value);
	  

		loc += '&Baud=115200'
	  //index = Brand.selectedIndex;
	  //loc += 'Brand=' + Brand.options[index].value+'&';	
	 // if(IpEnable.checked == false)
	  //loc +='StaticIp=0.0.0.0';
	  //else
	  //loc +='StaticIp='+ipaddress.value;
	  
      var code = 'location="' + loc + '"';
      eval(code);
   }
}

// done hiding -->
</script>
   </head>
   <body onLoad='frmLoad()'>
      <blockquote>
         <form>
         	<br><b>3G Backup Configuration</b><br>
         	<br>
         	<b>3G Backup</b> support to use a 3G USB Modem that connected to the USB interface of the router as a backup of ADSL Internet connection.
			Enable <b>3G Backup</b> will make the router connect to the 3G USB modem automatically when ADSL line is broken.<br>
         	<br>
         	Please input the USB modem parameters correctly for 3G wan connection. Press <b>"Save"</b> to save the prameters and reboot the router.
         	<br><br>
            <table border="0" cellpadding="0" cellspacing="0">
               <tr>
               </tr>
               <tr>
			   		     <td  colspan="2">
			   		       <input name="Auto" type="checkbox" value=""> &nbsp; Enable 3G Backup
			   		     </td>
			   		   </tr>
               <tr>
                  <td>PIN:</td>
                  <td><input name='Pin' type="password" size="20" maxlength="4"></td>
               </tr>
               <tr>
                  <td>APN:</td>
                  <td><input name='Apn' type="text" size="20" maxlength="128"></td>
               </tr>
               <tr>
                  <td>User:</td>
                  <td><input name='User' type='text' size="20" maxlength="64"></td>
               </tr>
			    <tr>
                  <td>Password:</td>
                  <td><input name='Passwrd' type='password' size="20" maxlength="128"></td>
               </tr>
               <tr>
                  <td>Dial Number:</td>
                  <td><input name='DialNo' type='text' size="20" maxlength="64"></td>
               </tr>
			   <tr>
                  <td>Auth Protocol:</td>
                  <td>
                    <select name='AuthPrtl' size="1">
                  <option value="0">AUTO AUTH</option>
                  <option value="1">PAP</option>
                  <option value="2">CHAP</option>
                    </select>
                  </td>
               </tr>   
               <tr>
               </table>
<!-- hide
               	  <td>Baud Rate:</td>
                  <td><select name="Brand" size="1">
                     <option value="1200">1200</option>
                     <option value="2400">2400</option>
                     <option value="4800">4800</option>
                     <option value="9600">9600</option>
                     <option value="19200">19200</option>
                     <option value="38400">38400</option>
                     <option value="57600">57600</option>
                     <option value="115200">115200</option>
                     <option value="230400">230400</option>
                     <option value="460800">460800</option>
                     <option value="921600">921600</option>
                     </select></td>
            
            <td>Static IP Address</td>                               
			<td><input type='checkbox' name='IpEnable' onClick='onChange()'></td> 
            <br>
            <div id="staticipaddress" class="ip" style="display:none">
				<br>
		 		<table border='0' cellpadding='0' cellspacing='0'>
			  	<tr>
			  	<td>Staitc Ip:&nbsp;&nbsp;</td>
				<td><input type='text' name='ipaddress' maxlength='64' size='30'></td>
				</tr>
				
				</table>
				<br><br>
			</div>
done hiding -->

            <center>
           <input type='button' onClick='btnSave()' value='Save'>
           </center>
         </form>
      </blockquote>
   </body>
</html>
